
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>RAHUL GOYAL LAB5</title><meta name="generator" content="MATLAB 9.2"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2018-12-11"><meta name="DC.source" content="Lab5.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>RAHUL GOYAL LAB5</h1><!--introduction--><p>ME 328 Fall 2018 - Lab Assignment #5</p><p><b>Author:</b> RAHUL GOYAL</p><p>California Polytechnic State University, San Luis Obispo, CA</p><p><b>Date Created:</b> December 04, 2018</p><p><b>Date Modified:</b> December 11, 2018</p><p><b>Description:</b> The critical section for fatigue failure on a shaft has been determined to be the location of the notch radius. To aid in the design of the shaft generate curves showing the effect on the factor of safety of varying the diameter of the stepped down portion, d, and the radius of the notch, r.</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Reset</a></li><li><a href="#2">Constants / Given Values</a></li><li><a href="#3">Input Parameters</a></li><li><a href="#4">Analysis</a></li></ul></div><h2 id="1">Reset</h2><pre class="codeinput">close <span class="string">all</span>;
clear <span class="string">all</span>;
clc;
</pre><h2 id="2">Constants / Given Values</h2><pre class="codeinput"><span class="comment">% Ratios of larger diameter to smaller diameter</span>
D_d = [1.25, 1.5, 1.75, 2.0, 2.25, 2.5];
<span class="comment">% Ratios of radius to smaller diameter</span>
r_d = [0.05, 0.10, 0.15, 0.20];
</pre><h2 id="3">Input Parameters</h2><pre class="codeinput">D = 3;                          <span class="comment">% Larger diameter (in)</span>
L = 5;                          <span class="comment">% Shaft length (in)</span>
a = 10;                         <span class="comment">% Lever length (in)</span>
P_a = 0.75;                     <span class="comment">% Alternating force (kips)</span>
P_m = 1.5;                      <span class="comment">% Mean force (kips)</span>

S_ut = 210;                     <span class="comment">% Strength, ultimate (ksi)</span>
S_y  = 180;                     <span class="comment">% Strength, yield (ksi)</span>

<span class="comment">% k_a = 1.34*S_ut^-0.085;         % Surface Factor (ground)</span>
k_a = 2.70*S_ut^-0.265;         <span class="comment">% Surface Factor (machined)</span>
</pre><h2 id="4">Analysis</h2><pre class="codeinput"><span class="comment">% Create factor of safety matrix</span>
FoS = zeros(length(D_d), length(r_d));

S_ep = S_ut / 2;                <span class="comment">% Endurance Limit Prime (ksi)</span>
<span class="keyword">if</span> S_ep &gt; 100
    S_ep = 100;
<span class="keyword">end</span>

k_c = 1;                        <span class="comment">% Loading Factor</span>
k_d = 1;                        <span class="comment">% Temperature Factor</span>
k_e = 1;                        <span class="comment">% Reliability Factor</span>

<span class="keyword">for</span> i = 1:length(D_d)

    d = D / D_d(i);                 <span class="comment">% Smaller diameter (in)</span>

    <span class="comment">% Size Factor (k_b)</span>
    <span class="keyword">if</span> (0.11 &lt;= d) &amp;&amp; (d &lt;= 2)
        k_b = (d/0.3)^-0.107;
    <span class="keyword">elseif</span> (0.2 &lt; d) &amp;&amp; (d &lt;= 10)
        k_b = 0.91*d^-0.157;
    <span class="keyword">else</span>
        k_b = 0;
        disp(<span class="string">"Stepped-down diameter out of range for k_b calculation!"</span>);
        disp(<span class="string">"The stepped-down diameter is: "</span> + d);
    <span class="keyword">end</span>

    <span class="comment">% Enduance Limit (ksi)</span>
    S_e = S_ep * k_a * k_b * k_c * k_d * k_e;

    <span class="comment">% Alternating Stresses (ksi)</span>
    <span class="comment">% Stress from Bending [M * c / I] (ksi)</span>
    sigma_a = (P_a*L) * (d/2) / (pi/4*(d/2)^4);
    <span class="comment">% Stress from Torsion [T * r / J] (ksi)</span>
    tau_a = (P_a*a) * (d/2) / (pi/2*(d/2)^4);
    <span class="comment">% Alternating Stress Prime (ksi)</span>
    <span class="comment">% Changes with notch radius, calculated below.</span>

    <span class="comment">% Mean Stresses (ksi)</span>
    <span class="comment">% Stress from Bending ]M * c / I] (ksi)</span>
    sigma_m = (P_m*L) * (d/2) / (pi/4*(d/2)^4);
    <span class="comment">% Stress from Torsion [T * r / J] (ksi)</span>
    tau_m = (P_m*a) * (d/2) / (pi/2*(d/2)^4);
    <span class="comment">% Mean Stress Prime (ksi)</span>
    sigma_mp = sqrt(sigma_m^2 + 3*tau_m^2);

    <span class="comment">% Miscellaneous Factors (k_f)</span>
    h = (D - d) / 2;                <span class="comment">% Step height (in)</span>
    <span class="keyword">for</span> j = 1:length(r_d)
        r = r_d(j) * d;                 <span class="comment">% Notch radius (in)</span>

        <span class="comment">% Stress Concentration Factor</span>
        <span class="comment">% https://www.amesweb.info/</span>
        <span class="comment">% StressConcentrationFactor/SteppedShaftWithShoulderFillet.aspx</span>

        <span class="comment">% Bending</span>
        <span class="keyword">if</span> (0.1 &lt;= h/r) &amp;&amp; (h/r &lt;= 2.0)
            C_1 =  0.947 + 1.206*sqrt(h/r) - 0.131*h/r;
            C_2 =  0.022 - 3.405*sqrt(h/r) + 0.915*h/r;
            C_3 =  0.869 + 1.777*sqrt(h/r) - 0.555*h/r;
            C_4 = -0.810 + 0.422*sqrt(h/r) - 0.260*h/r;
            k_t = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
        <span class="keyword">elseif</span> (2.0 &lt; h/r) &amp;&amp; (h/r &lt;= 20.0)
            C_1 =  1.232 + 0.832*sqrt(h/r) - 0.008*h/r;
            C_2 = -3.813 + 0.968*sqrt(h/r) - 0.260*h/r;
            C_3 =  7.423 - 4.868*sqrt(h/r) + 0.869*h/r;
            C_4 = -3.839 + 3.070*sqrt(h/r) - 0.600*h/r;
            k_t = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
        <span class="keyword">else</span>
            k_t = 0;
            disp(<span class="string">"h/r ratio out of range for k_t calculation!"</span>);
            disp(<span class="string">"The h/r ratio is: "</span> + h/r);
        <span class="keyword">end</span>

        <span class="comment">% Torsion</span>
        <span class="keyword">if</span> (0.25 &lt;= h/r) &amp;&amp; (h/r &lt;= 4.0)
            C_1 =  0.905 + 0.783*sqrt(h/r) - 0.075*h/r;
            C_2 = -0.437 - 1.969*sqrt(h/r) + 0.553*h/r;
            C_3 =  1.557 + 1.073*sqrt(h/r) - 0.578*h/r;
            C_4 = -1.061 + 0.171*sqrt(h/r) + 0.086*h/r;
            k_ts = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
<span class="comment">%         elseif h/r &gt; 4.0</span>
<span class="comment">%             C_1 =  0.905 + 0.783*sqrt(h/r) - 0.075*h/r;</span>
<span class="comment">%             C_2 = -0.437 - 1.969*sqrt(h/r) + 0.553*h/r;</span>
<span class="comment">%             C_3 =  1.557 + 1.073*sqrt(h/r) - 0.578*h/r;</span>
<span class="comment">%             C_4 = -1.061 + 0.171*sqrt(h/r) + 0.086*h/r;</span>
<span class="comment">%             k_ts = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;</span>
        <span class="keyword">else</span>
            k_ts = 0;
            disp(<span class="string">"h/r ratio out of range for k_ts calculation!"</span>);
            disp(<span class="string">"The h/r ratio is: "</span> + h/r);
        <span class="keyword">end</span>

        <span class="comment">% Notch Sensitivity</span>
        <span class="comment">% Bending</span>
        sqrt_a = 0.246 - 3.08E-3*S_ut + 1.51E-5*S_ut^2 - 2.67E-8*S_ut^3;
        q = 1 / (1 + sqrt_a/sqrt(r));
        <span class="keyword">if</span> k_t
            k_f = q*(k_t - 1) + 1;
        <span class="keyword">else</span>
            k_f = 0;
        <span class="keyword">end</span>
        <span class="comment">% Torsion</span>
        sqrt_as = 0.190 - 2.51E-3*S_ut + 1.35E-5*S_ut^2 - 2.67E-8*S_ut^3;
        qs = 1 / (1 + sqrt_as/sqrt(r));
        <span class="keyword">if</span> k_ts
            k_fs = qs*(k_ts - 1) + 1;
        <span class="keyword">else</span>
            k_fs = 0;
        <span class="keyword">end</span>

        <span class="comment">% Alternating Stress Prime (ksi)</span>
        sigma_ap = sqrt((k_f*sigma_a)^2 + 3*(k_fs*tau_a)^2);

        <span class="comment">% Factor of Safety (Modified Goodman)</span>
        <span class="keyword">if</span> k_b &amp;&amp; k_f &amp;&amp; k_fs
            FoS_MG = (sigma_ap/S_e + sigma_mp/S_ut)^-1;
        <span class="keyword">else</span>
            FoS_MG = 0;
        <span class="keyword">end</span>

        <span class="comment">% Factor of Safety (Langer Static Yield)</span>
        FoS_LSY = S_y / (sigma_ap + sigma_mp);

        <span class="comment">% Factor of Safety</span>
        FoS(i, j) = min(FoS_MG, FoS_LSY);
        <span class="keyword">if</span> ~FoS(i, j)
            FoS(i, j) = NaN;
        <span class="keyword">end</span>

    <span class="keyword">end</span>
<span class="keyword">end</span>

<span class="comment">% Plot</span>
plot(r_d, FoS, <span class="string">'LineWidth'</span>, 2);
title(<span class="string">"Factor of Safety vs. Radius to Smaller Diameter Ratio (No Extrapolations)"</span>);
xlabel({<span class="string">'Ratio of Radius to Smaller Diameter'</span>
        <span class="string">''</span>
        <span class="comment">% Figure label</span>
        <span class="string">'\bfFigure 1: \rmFoS vs. Radius to Smaller Diameter Ratio (No Extrapolations)'</span>});
ylabel(<span class="string">"Factor of Safety"</span>);
</pre><pre class="codeoutput">h/r ratio out of range for k_ts calculation!
The h/r ratio is: 5
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 7.5
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 10
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 5
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 12.5
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 6.25
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 4.1667
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 15
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 7.5
h/r ratio out of range for k_ts calculation!
The h/r ratio is: 5
</pre><img vspace="5" hspace="5" src="Lab5_01.png" style="width:560px;height:420px;" alt=""> <p class="footer"><br><a href="http://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2017a</a><br></p></div><!--
##### SOURCE BEGIN #####
%% RAHUL GOYAL LAB5
% ME 328 Fall 2018 - Lab Assignment #5
%
% *Author:* RAHUL GOYAL
%
% California Polytechnic State University, San Luis Obispo, CA
%
% *Date Created:* December 04, 2018
%
% *Date Modified:* December 11, 2018
%
% *Description:*
% The critical section for fatigue failure on a shaft has been determined
% to be the location of the notch radius. To aid in the design of the shaft
% generate curves showing the effect on the factor of safety of varying the
% diameter of the stepped down portion, d, and the radius of the notch, r.



%% Reset
close all;
clear all;
clc;



%% Constants / Given Values

% Ratios of larger diameter to smaller diameter
D_d = [1.25, 1.5, 1.75, 2.0, 2.25, 2.5];
% Ratios of radius to smaller diameter
r_d = [0.05, 0.10, 0.15, 0.20];



%% Input Parameters

D = 3;                          % Larger diameter (in)
L = 5;                          % Shaft length (in)
a = 10;                         % Lever length (in)
P_a = 0.75;                     % Alternating force (kips)
P_m = 1.5;                      % Mean force (kips)

S_ut = 210;                     % Strength, ultimate (ksi)
S_y  = 180;                     % Strength, yield (ksi)

% k_a = 1.34*S_ut^-0.085;         % Surface Factor (ground)
k_a = 2.70*S_ut^-0.265;         % Surface Factor (machined)



%% Analysis

% Create factor of safety matrix
FoS = zeros(length(D_d), length(r_d));

S_ep = S_ut / 2;                % Endurance Limit Prime (ksi)
if S_ep > 100
    S_ep = 100;
end

k_c = 1;                        % Loading Factor
k_d = 1;                        % Temperature Factor
k_e = 1;                        % Reliability Factor

for i = 1:length(D_d)
    
    d = D / D_d(i);                 % Smaller diameter (in)
    
    % Size Factor (k_b)
    if (0.11 <= d) && (d <= 2)
        k_b = (d/0.3)^-0.107;
    elseif (0.2 < d) && (d <= 10)
        k_b = 0.91*d^-0.157;
    else
        k_b = 0;
        disp("Stepped-down diameter out of range for k_b calculation!");
        disp("The stepped-down diameter is: " + d);
    end
    
    % Enduance Limit (ksi)
    S_e = S_ep * k_a * k_b * k_c * k_d * k_e;
    
    % Alternating Stresses (ksi)
    % Stress from Bending [M * c / I] (ksi)
    sigma_a = (P_a*L) * (d/2) / (pi/4*(d/2)^4);
    % Stress from Torsion [T * r / J] (ksi)
    tau_a = (P_a*a) * (d/2) / (pi/2*(d/2)^4);
    % Alternating Stress Prime (ksi)
    % Changes with notch radius, calculated below.

    % Mean Stresses (ksi)
    % Stress from Bending ]M * c / I] (ksi)
    sigma_m = (P_m*L) * (d/2) / (pi/4*(d/2)^4);
    % Stress from Torsion [T * r / J] (ksi)
    tau_m = (P_m*a) * (d/2) / (pi/2*(d/2)^4);
    % Mean Stress Prime (ksi)
    sigma_mp = sqrt(sigma_m^2 + 3*tau_m^2);
    
    % Miscellaneous Factors (k_f)
    h = (D - d) / 2;                % Step height (in)   
    for j = 1:length(r_d)
        r = r_d(j) * d;                 % Notch radius (in)
        
        % Stress Concentration Factor
        % https://www.amesweb.info/
        % StressConcentrationFactor/SteppedShaftWithShoulderFillet.aspx
        
        % Bending
        if (0.1 <= h/r) && (h/r <= 2.0)
            C_1 =  0.947 + 1.206*sqrt(h/r) - 0.131*h/r;
            C_2 =  0.022 - 3.405*sqrt(h/r) + 0.915*h/r;
            C_3 =  0.869 + 1.777*sqrt(h/r) - 0.555*h/r;
            C_4 = -0.810 + 0.422*sqrt(h/r) - 0.260*h/r;
            k_t = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
        elseif (2.0 < h/r) && (h/r <= 20.0)
            C_1 =  1.232 + 0.832*sqrt(h/r) - 0.008*h/r;
            C_2 = -3.813 + 0.968*sqrt(h/r) - 0.260*h/r;
            C_3 =  7.423 - 4.868*sqrt(h/r) + 0.869*h/r;
            C_4 = -3.839 + 3.070*sqrt(h/r) - 0.600*h/r;
            k_t = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;            
        else
            k_t = 0;            
            disp("h/r ratio out of range for k_t calculation!");
            disp("The h/r ratio is: " + h/r);
        end
        
        % Torsion
        if (0.25 <= h/r) && (h/r <= 4.0)
            C_1 =  0.905 + 0.783*sqrt(h/r) - 0.075*h/r;
            C_2 = -0.437 - 1.969*sqrt(h/r) + 0.553*h/r;
            C_3 =  1.557 + 1.073*sqrt(h/r) - 0.578*h/r;
            C_4 = -1.061 + 0.171*sqrt(h/r) + 0.086*h/r;
            k_ts = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
%         elseif h/r > 4.0
%             C_1 =  0.905 + 0.783*sqrt(h/r) - 0.075*h/r;
%             C_2 = -0.437 - 1.969*sqrt(h/r) + 0.553*h/r;
%             C_3 =  1.557 + 1.073*sqrt(h/r) - 0.578*h/r;
%             C_4 = -1.061 + 0.171*sqrt(h/r) + 0.086*h/r;
%             k_ts = C_1 + C_2*(2*h/D) + C_3*(2*h/D)^2 + C_4*(2*h/D)^3;
        else
            k_ts = 0;            
            disp("h/r ratio out of range for k_ts calculation!");
            disp("The h/r ratio is: " + h/r);
        end
        
        % Notch Sensitivity
        % Bending
        sqrt_a = 0.246 - 3.08E-3*S_ut + 1.51E-5*S_ut^2 - 2.67E-8*S_ut^3;
        q = 1 / (1 + sqrt_a/sqrt(r));
        if k_t
            k_f = q*(k_t - 1) + 1;
        else
            k_f = 0;
        end
        % Torsion
        sqrt_as = 0.190 - 2.51E-3*S_ut + 1.35E-5*S_ut^2 - 2.67E-8*S_ut^3;
        qs = 1 / (1 + sqrt_as/sqrt(r));
        if k_ts
            k_fs = qs*(k_ts - 1) + 1;
        else
            k_fs = 0;
        end
        
        % Alternating Stress Prime (ksi)
        sigma_ap = sqrt((k_f*sigma_a)^2 + 3*(k_fs*tau_a)^2);
        
        % Factor of Safety (Modified Goodman)
        if k_b && k_f && k_fs
            FoS_MG = (sigma_ap/S_e + sigma_mp/S_ut)^-1;
        else
            FoS_MG = 0;
        end
        
        % Factor of Safety (Langer Static Yield)
        FoS_LSY = S_y / (sigma_ap + sigma_mp);
        
        % Factor of Safety
        FoS(i, j) = min(FoS_MG, FoS_LSY);
        if ~FoS(i, j)
            FoS(i, j) = NaN;
        end
        
    end
end

% Plot
plot(r_d, FoS, 'LineWidth', 2);
title("Factor of Safety vs. Radius to Smaller Diameter Ratio (No Extrapolations)");
xlabel({'Ratio of Radius to Smaller Diameter'
        ''
        % Figure label
        '\bfFigure 1: \rmFoS vs. Radius to Smaller Diameter Ratio (No Extrapolations)'});
ylabel("Factor of Safety");
##### SOURCE END #####
--></body></html>